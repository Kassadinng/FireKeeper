(function(){var e,r,s,i,t,p,a,u,l,o,c,n,d,v,m,g;m={dev:"app",release:"release",vendor:"vendor",module:"app/module"},a={css:m.dev+"/**/*.css",less:m.dev+"/**/*.less",javascript:m.dev+"/**/*.js",sass:m.dev+"/**/*.{sass,scss}",image:m.dev+"/**/*.{jpg,svg,gif,png}",html:m.dev+"/**/*.html",vendor:m.vendor+"/**/*",font:m.dev+"/**/*.{ttf,eot,svg,woff,woff2}",audio:m.dev+"/**/*.mp3",json:m.dev+"/**/*.json",coffee:m.dev+"/**/*.coffee"},d={all:m.module+"/**/*.*"},v=[require("gulp"),require("yargs").argv,require("browser-sync"),require("gulp-dest-clean"),require("gulp-cached"),require("gulp-filter"),require("gulp-html-tag-include"),require("gulp-htmlmin"),require("webpack-stream"),require("gulp-imagemin"),require("gulp-if"),require("gulp-cssnano")],l=v[0],e=v[1],r=v[2],i=v[3],s=v[4],u=v[5],o=v[6],c=v[7],g=v[8],n=v[9],t=v[10],p=v[11],l.task("audio",function(){return l.src(a.audio).pipe(u(["**/*.*","!"+m.module+"/**/*.*"])).pipe(s("audio")).pipe(l.dest(m.release))}),l.task("clean",function(){return l.src(m.release).pipe(i(m.release))}),l.task("default",["view","watch"]),l.task("image",function(){return l.src(a.image).pipe(u(["**/*.*","!"+m.module+"/**/*.*"])).pipe(s("image")).pipe(t(!e.d,n({progressive:!0,interlaced:!0,multipass:!0}))).pipe(l.dest(m.release))}),l.task("json",function(){return l.src(a.json).pipe(u(["**/*.*","!"+m.module+"/**/*.*"])).pipe(s("json")).pipe(l.dest(m.release))}),l.task("release",["clean"],function(){l.start(["view","webpack","image"])}),l.task("view",function(){return l.src(a.html).pipe(s("view")).pipe(t(!e.c,o())).pipe(t(!e.d,c({removeStyleLinkTypeAttributes:!0,removeScriptTypeAttributes:!0,removeEmptyAttributes:!0,preventAttributesEscaping:!0,collapseBooleanAttributes:!0}))).pipe(l.dest(m.release))}),l.task("watch",function(){var s,i,t,p;g=require("webpack"),i=require("./webpack.config.js")(e),t=require("webpack-dev-middleware"),p=require("webpack-hot-middleware"),s=g(i),r({open:"",server:{baseDir:"release",middleware:[t(s,{publicPath:i.output.publicPath,stats:{colors:!0}}),p(s)]},files:["app/module/*.babel.jsx","release/view/*.html"]}),l.watch(a.html,["view"])}),l.task("webpack",function(){var r;return r=u(["**/*.css"],{restore:!0}),l.src(d.all).pipe(g(require("./webpack.config.js")(e))).pipe(r).pipe(t(!e.d,p())).pipe(r.restore).pipe(l.dest(m.release+"/resource/vendor"))})}).call(this);